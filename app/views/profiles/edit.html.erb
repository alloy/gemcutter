<% @title = "Edit Profile" %>

<%= form_for current_user, :url => {:controller => 'profiles', :action => 'update'} do |form| %>
  <%= form.error_messages %>

  <div class="avatar_field">
    <%= form.label :avatar, 'Avatar' %>
    <%= gravatar(60) %>
    <%= link_to 'Change', 'http://www.gravatar.com' %>
  </div>

  <div class="text_field">
    <%= form.label :handle, 'Handle' %>
    <%= form.text_field :handle, :size => 25 %>
  </div>

  <div class="text_field">
    <%= form.label :email, 'Email Address' %>
    <%= form.text_field :email, :size => 25 %>
  </div>

  <div class="text_field">
    <%= form.label :website, 'Web Site' %>
    <%= form.text_field :website, :size => 25 %>
  </div>

  <div class="text_field">
    <%= form.label :location, 'Location' %>
    <%= form.text_field :location, :size => 25 %>
  </div>

  <div class="text_area">
    <%= form.label :bio, 'Bio' %>
    <%= form.text_area :bio, :size => '24x3'%>
  </div>

  <div class="submit_field">
    <%= form.submit "Update", :disable_with => "Please wait..." %>
  </div>

  <h3>API Access</h3>

  <p>Your API key is <strong><%= current_user.api_key %></strong>. <br />
  Your <code>~/.gem/credentials</code> file should look like this to use the <%= link_to "gem commands", page_url("gem_docs") %>:</p>

<pre><code>---
:rubygems_api_key: <%= current_user.api_key %></code></pre>

<% end %>

<p><%= button_to "Reset my API key", reset_api_v1_api_key_path, :method => :put, :confirm => "Are you sure? This cannot be undone." %></p>
